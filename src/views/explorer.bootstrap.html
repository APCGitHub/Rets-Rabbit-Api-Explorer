<div class="row">
	<!-- FORM -->
	<div class="col-md-6 col-sm-4 col-xs-12">
		<h3>Build Query</h3>
		<form ng-submit="vm.search()" role="form" class="form-horizontal">
			<!-- SELECT -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="select">$select:</label>
				<div class="col-sm-10">
					<input class="form-control" ng-change="vm.updateQuery()" name="select" ng-model="vm.data.searchForm.select" id="select" type="text"/>
				</div>
			</div>
			<!-- FILTER -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="filter">$filter:</label>
				<div class="col-sm-10">
					<div class="row" ng-repeat-start="filter in vm.data.searchForm.filter track by $index">
						<div class="col-sm-10">
							<input  
								ng-change="vm.updateQuery()" 
								name="filter[]" 
								class="form-control" 
								ng-model="vm.data.searchForm.filter[$index].value" 
								id="filter_{{$index+1}}" 
								type="text"/>
						</div>
						<!-- REMOVE FILTER -->
						<div class="col-sm-2">
							<button type="button" ng-disabled="$index > 0" class="btn btn-danger" ng-click="vm.removeFilter(filter)"><i class="fa fa-trash-o"></i></button>
						</div>
					</div>
					<!-- JOIN: AND | OR -->
					<div class="row" ng-repeat-end ng-if="$index + 1 < vm.data.searchForm.filter.length" style="margin-top:15px; margin-bottom:15px">
						<div class="col-sm-10">
							<div class="row">
								<div class="col-sm-4 col-sm-offset-4 text-center">
									<select ng-model="vm.data.searchForm.filter[$index].join" class="form-control" ng-change="vm.updateQuery()">
										<option value="and" selected>and</option>
										<option value="or">or</option>
									</select>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- ADD FILTER -->
				<div class="col-sm-4 col-sm-offset-4 text-center" style="margin-top:20px">
					<button type="button" class="btn btn-success" ng-click="vm.addFilter()">Add Filter</button>
				</div>
			</div>
			<!-- ORDERBY -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="orderby">$orderby:</label>
				<div class="col-sm-10">
					<div style="margin-bottom:15px" class="row" ng-repeat="orderby in vm.data.searchForm.orderby track by $index">
						<div class="col-sm-8">
							<input 
								name="orderby[]" 
								ng-model="vm.data.searchForm.orderby[$index].value" 
								id="orderby_input_{{$index+1}}" 
								class="form-control" 
								value="orderby.value"
								ng-change="vm.updateQuery()"
								type="text"/>	
						</div>
						<div class="col-sm-3">
							<select ng-model="vm.data.searchForm.orderby[$index].direction" class="form-control" ng-change="vm.updateQuery()">
								<option value="asc" selected>asc</option>
								<option value="desc">desc</option>
							</select>
						</div>
						<!-- REMOVE FILTER -->
						<div class="col-sm-1">
							<button type="button" ng-disabled="$index > 0" class="btn btn-danger" ng-click="vm.removeOrderby(orderby)"><i class="fa fa-trash-o"></i></button>
						</div>
					</div>
				</div>
				<!-- ADD ORDERBY -->
				<div class="col-sm-4 col-sm-offset-4 text-center">
					<button type="button" class="btn btn-success" ng-click="vm.addOrderby()">Add Orderby</button>
				</div>
			</div>
			<!-- TOP -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="top">$top:</label>
				<div class="col-sm-10">
					<input ng-change="vm.updateQuery()" ng-model="vm.data.searchForm.top" name="top" class="form-control" id="top" type="text"/>
				</div>
			</div>
			<!-- SKIP -->
			<div class="form-group">
				<label class="control-label col-sm-2" for="skip">$skip:</label>
				<div class="col-sm-10">
					<input ng-change="vm.updateQuery()" ng-model="vm.data.searchForm.skip" name="skip" class="form-control" id="skip" type="text"/>
				</div>
			</div>
			<button type="submit" class="btn btn-primary" value="search">Search</button>
		</form>
	</div>
	<!-- QUERY -->
	<div class="col-md-6 col-sm-4 col-xs-12">
		<h3>Request</h3>
		<code style="display:block; padding:10px">
			{{vm.data.fullRequest}}
		</code>
	</div>
	<!-- RESULTS -->
	<div class="col-md-12 col-sm-4 col-xs-12">
		<h3 class="text-center">Results</h3>
		<div class="results" ng-if="vm.data.results && !vm.data.error">
			<pre>{{vm.data.results | prettyJson}}</pre>
		</div>
		<div class="error" ng-if="vm.data.error">
			<pre>{{vm.data.error | prettyJson}}</pre>
		</div>
	</div>
</div>